<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">


<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">

<dom-module id="view-login">

    <template>

        <style>
            :host {
                display: block;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: var(--app-primary-color);

                @apply(--layout);
                @apply(--layout-center-center);
            }
            paper-material{
                padding: 10px;
            }
            paper-button > * {
                vertical-align: middle;
                text-transform: none;
                color: #ffffff;
            }

        </style>

        <paper-material>
            <paper-input label="email" value="{{email}}"></paper-input>
            <paper-input label="password" value="{{password}}" type="password"></paper-input>

            <paper-button on-tap="signIn" disabled="[[disabled]]">
                <iron-icon icon="account-circle"></iron-icon>
                <span>Sign in</span>
            </paper-button>
            
            <div>
                <a href="#" on-tap='registerDialog'> register</a>
            </div>
        </paper-material>




        <paper-dialog id="registerDialog">
            <paper-button class="close" dialog-dismiss>close</paper-button>

            <paper-input label="email" value="{{email}}"></paper-input>
            <paper-input label="password" value="{{password}}" type="password"></paper-input>
            <paper-input label="repeat password" value="{{repeatPassword}}" type="password"></paper-input>

            <paper-button on-tap="register" disabled="[[disabled]]">
                <iron-icon icon="account-circle"></iron-icon>
                <span>Register</span>
            </paper-button>

        </paper-dialog>


    </template>

    <script>

        Polymer({

            is: 'view-login',

            properties:{
                disabled: {
                    type: Boolean,
                    reflectToAttribute: true,
                    value: false
                },
                signedIn: {
                    type: Boolean,
                    reflectToAttribute: true,
                    value: false
                }
            },
            signIn: function() {
                this.fire('sign-in', {'email':this.email,'password':this.password}, { bubbles: false });
                this.email = '';
                this.password= '';
            },

            registerDialog: function(){
                this.$.registerDialog.open();
            },

            register: function(){
                if(this.password==this.repeatPassword){
                    console.log('register')
                    this.fire('register', {'email':this.email,'password':this.password}, { bubbles: false });
                }
            },

        });

    </script>

</dom-module>
