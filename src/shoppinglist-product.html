
<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<link rel="import" href="shared-styles.html">
<link rel="import" href="object-list-behavior.html">


<dom-module id="shoppinglist-product">

    <template>

        <style include="iron-flex iron-flex-alignment"></style>
        <style include="shared-styles"></style>
        <style>
            :host {
                display: block;
            }
            paper-input{
                margin-top: -8px;
                margin-bottom: -8px;
            }
            .name{
                max-width: 200px;
            }
            .quantity{
                width: 40px;
                text-align: right;
            }
            .unit{
                width: 40px;
                margin-left: 3px;
            }
            .checked{

            }
            .secondquantity{
                width: 40px;
                text-align: right;
            }
        </style>

        <firebase-document app-name="kokkies" path="/[[user.uid]]/shoppinglistproducts/[[period]]/[[shoppinglist]]/[[key]]" data="{{product}}"></firebase-document>

        <paper-material class="horizontal layout center">
            <div class="name flex">{{_getObjectProperty(products,key,'name')}}</div>
            <div class="quantity">{{_round(quantity)}}</div>
            <div class="unit flex">{{_getObjectProperty(products,key,'unit')}}</div>
            <div class="checked"><paper-checkbox checked="{{product.checked}}"></paper-checkbox></div>
        </paper-material>

    </template>

    <script>

        Polymer({
            is: 'shoppinglist-product',

            behaviors: [
                objectListBehavior,
            ],

            properties:{
                user: {
                    type: Object,
                },
                period: {
                    type: String,
                },
                shoppinglist: {
                    type: String,
                },
                key: {
                    type: String,
                },
                products: {
                    type: Object,
                },
                quantity: {
                    type: Number,
                },
                checked: {
                    type: Boolean,
                    observer: '_checkedChanged',
                },
            },

            _checkedChanged: function(checked){

            },

            _round: function(val){
                if(typeof val != 'undefined'){

                    var decimals = 0;

                    if(val < 1){
                        decimals = 2;
                    }
                    else if(val < 20){
                        decimals = 1;
                    }
   
                    return val.toFixed(decimals);
                }
            },

        });

    </script>

</dom-module>



